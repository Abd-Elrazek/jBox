new jBoxPlugin("Image",{src:"href",gallery:"data-jbox-image",imageLabel:"title",imageFade:360,imageSize:"contain",attach:jQuery("[data-jbox-image]"),target:jQuery(window),fixed:!0,blockScroll:!0,closeOnEsc:!0,closeOnClick:"button",closeButton:!0,overlay:!0,animation:"zoomIn",preventDefault:!0,width:1e4,height:1e4,adjustDistance:{top:5,right:5,bottom:40,top:40},_onInit:function(){this.images=this.currentImage={},this.imageZIndex=1,this.attachedElements&&jQuery.each(this.attachedElements,function(t,i){if(i=jQuery(i),!i.data("jBox-image-gallery")){var o=i.attr(this.options.gallery)||"default";!this.images[o]&&(this.images[o]=[]),this.images[o].push({src:i.attr(this.options.src),label:i.attr(this.options.imageLabel)||""}),"title"==this.options.imageLabel&&i.removeAttr("title"),i.data("jBox-image-gallery",o),i.data("jBox-image-id",this.images[o].length-1)}}.bind(this));var t=function(t,i,o,s){if(!jQuery("#jBox-image-"+t+"-"+i).length){{var e=jQuery("<div/>",{id:"jBox-image-"+t+"-"+i,"class":"jBox-image-container"}).css({backgroundImage:"url("+this.images[t][i].src+")",backgroundSize:this.options.imageSize,opacity:s?1:0,zIndex:o?0:this.imageZIndex++}).appendTo(this.content);jQuery("<div/>",{id:"jBox-image-label-"+t+"-"+i,"class":"jBox-image-label"+(s?" active":"")}).html(this.images[t][i].label).click(function(){$(this).toggleClass("expanded")}).appendTo(this.imageLabel)}!s&&!o&&e.animate({opacity:1},this.options.imageFade)}}.bind(this),i=function(t,i){jQuery(".jBox-image-label.active").removeClass("active expanded"),jQuery("#jBox-image-label-"+t+"-"+i).addClass("active")};this.showImage=function(o){if("open"!=o){var s=this.currentImage.gallery,e=this.currentImage.id+(1*("prev"==o)?-1:1);e=e>this.images[s].length-1?0:0>e?this.images[s].length-1:e}else{var s=this.source.data("jBox-image-gallery"),e=this.source.data("jBox-image-id");jQuery(".jBox-image-pointer-prev, .jBox-image-pointer-next").css({display:this.images[s].length>1?"block":"none"})}if(this.currentImage={gallery:s,id:e},jQuery("#jBox-image-"+s+"-"+e).length)jQuery("#jBox-image-"+s+"-"+e).css({zIndex:this.imageZIndex++,opacity:0}).animate({opacity:1},"open"==o?0:this.options.imageFade),i(s,e);else{this.wrapper.addClass("jBox-image-loading");var n=function(){t(s,e,!1),i(s,e),this.wrapper.removeClass("jBox-image-loading")}.bind(this);jQuery('<img src="'+this.images[s][e].src+'"/>').each(function(){var t=new Image;t.onload=n,t.src=$(this).attr("src")})}var a=e+1;a=a>this.images[s].length-1?0:0>a?this.images[s].length-1:a,!jQuery("#jBox-image-"+s+"-"+a).length&&jQuery('<img src="'+this.images[s][a].src+'"/>').each(function(){t(s,a,!0)})}},_onCreated:function(){this.imageLabel=jQuery("<div/>",{"class":"jBox-image-label-container"}).appendTo(this.wrapper),this.imageLabel.append(jQuery("<div/>",{"class":"jBox-image-pointer-prev",click:function(){this.showImage("prev")}.bind(this)})).append(jQuery("<div/>",{"class":"jBox-image-pointer-next",click:function(){this.showImage("next")}.bind(this)}))},_onOpen:function(){jQuery("body").addClass("jBox-image-open"),jQuery(document).on("keyup.jBox-"+this.id,function(t){37==t.keyCode&&this.showImage("prev"),39==t.keyCode&&this.showImage("next")}.bind(this)),this.showImage("open")},_onClose:function(){jQuery("body").removeClass("jBox-image-open"),jQuery(document).off("keyup.jBox-"+this.id)},_onCloseComplete:function(){this.wrapper.find(".jBox-image-container").css("opacity",0)}});